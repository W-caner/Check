import{w as e}from"./element-plus.d6772035.js";import"./side-channel.ae62d9bb.js";import"./qs.dd4863fa.js";import{aj as t,ah as a,ao as o,ag as s,G as r,O as l,q as n,aJ as i,N as d}from"./@vue.c261c184.js";import"./resize-observer-polyfill.96acbc9d.js";import"./lodash.c042e748.js";import"./axios.df2521e5.js";import"./normalize-wheel.86fce3c7.js";import"./mitt.20cc8481.js";import"./dayjs.1c7a45b9.js";import"./async-validator.3a3a8ce1.js";import"./@popperjs.59bfb2c1.js";import"./get-intrinsic.6937319b.js";import"./has-symbols.66aa3060.js";import"./function-bind.3516d9d0.js";import"./has.e5e9094d.js";import"./call-bind.d7be007a.js";const c={name:"manageGroup",inject:["reload"],data:()=>({manList:[],group:{groupid:"",name:""},currentPage:1,totalCount:1}),mounted(){this.$axios.get("http://localhost:9000/manage/getManGroup",{params:{id:localStorage.getItem("userId")}}).then((e=>{for(let t=0;t<e.data.length;t++)this.manList.push(e.data[t]);this.totalCount=e.data.length})).catch((e=>{this.$message.error("出错了！"),console.log(e)}))},methods:{handleSizeChange(e){this.pageSize=e,this.currentPage=1},handlecurrentChange(e){this.currentPage=e},createGroup(){this.$prompt("请输入创建的群组名称","创建群组",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:t})=>{this.$axios.get("http://localhost:9000/manage/addGroup",{params:{userid:localStorage.getItem("userId"),groupname:t,memname:localStorage.getItem("ms_username")}}).then((e=>{"success"===e.data&&(this.$message({type:"success",message:"创建群组成功"}),this.reload())})).catch((t=>{e.error("出错了"),console.log(t)}))})).catch((e=>{console.log(e)}))},delGroup(t,a){Object.keys(this.group).forEach((e=>{this.group[e]=a[e]})),console.log(this.group),this.$axios.post("http://localhost:9000/manage/delGroup",{groupid:this.group.groupid}).then((t=>{"success"===t.data&&(e.success("成功解散群组"),this.reload())})).catch((e=>{this.$message.error("出错了！"),console.log(e)}))}}},p=i();t("data-v-d0298a98");const h={slot:"header",class:"clearfix"},u=l("span",{class:"box-title"},"我管理的群组",-1),g=d("创建群组"),m={style:{display:"none"}},f={style:{"font-size":"16px"}},j=d(" 进入 "),b=d(" 解散 ");a();const y=p(((e,t,a,i,d,c)=>{const y=o("el-button"),x=o("el-table-column"),C=o("router-link"),w=o("el-table"),_=o("el-pagination"),z=o("el-card");return s(),r("div",null,[l(z,{class:"box-card"},{default:p((()=>[l("div",h,[u,l(y,{style:{float:"right","font-size":"16px","padding-right":"30px"},type:"text",onClick:t[1]||(t[1]=e=>c.createGroup())},{default:p((()=>[g])),_:1})]),l(w,{"show-header":!1,data:d.manList,style:{width:"100%"},stripe:"","highlight-current-row":""},{default:p((()=>[l(x,{width:"10"},{default:p((e=>[l("span",m,n(e.row.groupid),1)])),_:1}),l(x,null,{default:p((e=>[l("span",f,n(e.row.name),1)])),_:1}),l(x,{width:"150",align:"center"},{default:p((e=>[l(C,{to:"/manage/"+e.row.groupid},{default:p((()=>[l(y,{type:"primary",size:"small",style:{width:"100%"}},{default:p((()=>[j])),_:1})])),_:2},1032,["to"])])),_:1}),l(x,{width:"150",align:"center"},{default:p((e=>[l(y,{type:"danger",size:"small",icon:"el-icon-delete",style:{width:"100%"},onClick:t=>c.delGroup(e.$index,e.row)},{default:p((()=>[b])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),l(_,{onSizeChange:c.handleSizeChange,onCurrentChange:c.handlecurrentChange,"current-page":d.currentPage,layout:"total,prev, pager, next, jumper",total:d.totalCount,"hide-on-single-page":!1},null,8,["onSizeChange","onCurrentChange","current-page","total"])])),_:1})])}));c.render=y,c.__scopeId="data-v-d0298a98";export default c;
