import{B as t,p as e,a,r as s,o,c as r,f as l,t as i,w as d,h as n}from"./vendor.d4ba3cb4.js";import"./utils.59183e0b.js";const c={name:"manageGroup",inject:["reload"],data:()=>({manList:[],group:{id:"",name:""}}),mounted(){this.$axios.get("http://localhost:9000/manage/getManGroup",{params:{id:localStorage.getItem("userId")}}).then((t=>{for(let e=0;e<t.data.length;e++)this.manList.push(t.data[e])})).catch((t=>{this.$message.error("出错了！")}))},methods:{createGroup(){this.$prompt("请输入创建的群组名称","创建群组",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:e})=>{this.$axios.get("http://localhost:9000/manage/addGroup",{params:{userid:localStorage.getItem("userId"),groupname:e,memname:localStorage.getItem("ms_username")}}).then((t=>{"success"===t.data&&(this.$message({type:"success",message:"创建群组成功"}),this.reload())})).catch((e=>{t.error("出错了")}))})).catch((t=>{}))},delGroup(e,a){Object.keys(this.group).forEach((t=>{this.group[t]=a[t]})),this.$axios.post("http://localhost:9000/manage/delGroup",{groupid:this.group.groupid}).then((e=>{"success"===e.data&&(t.success("成功解散群组"),this.reload())})).catch((t=>{this.$message.error("出错了！")}))}}},u=d();e("data-v-6484e277");const h={slot:"header",class:"clearfix"},p=l("span",{class:"box-title"},"我管理的群组",-1),g=n("创建群组"),m={style:{display:"none"}},f={style:{"font-size":"16px"}},x=n(" 进入 "),w=n(" 解散 ");a();const y=u(((t,e,a,d,n,c)=>{const y=s("el-button"),_=s("el-table-column"),b=s("router-link"),G=s("el-table"),$=s("el-pagination"),v=s("el-card");return o(),r("div",null,[l(v,{class:"box-card"},{default:u((()=>[l("div",h,[p,l(y,{style:{float:"right","font-size":"16px","padding-right":"30px"},type:"text",onClick:e[1]||(e[1]=t=>c.createGroup())},{default:u((()=>[g])),_:1})]),l(G,{"show-header":!1,data:n.manList,style:{width:"100%"},stripe:"","highlight-current-row":""},{default:u((()=>[l(_,{width:"10"},{default:u((t=>[l("span",m,i(t.row.groupid),1)])),_:1}),l(_,null,{default:u((t=>[l("span",f,i(t.row.name),1)])),_:1}),l(_,{width:"150",align:"center"},{default:u((t=>[l(b,{to:"/manage/"+t.row.groupid},{default:u((()=>[l(y,{type:"primary",size:"small",style:{width:"100%"}},{default:u((()=>[x])),_:1})])),_:2},1032,["to"])])),_:1}),l(_,{width:"150",align:"center"},{default:u((t=>[l(y,{type:"danger",size:"small",icon:"el-icon-delete",style:{width:"100%"},onClick:e=>c.delGroup(t.$index,t.row)},{default:u((()=>[w])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),l($)])),_:1})])}));c.render=y,c.__scopeId="data-v-6484e277";export default c;
