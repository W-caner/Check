import{r as e}from"./index.4bdb872e.js";import{w as t}from"./element-plus.d6772035.js";import{aj as o,ah as r,ao as i,ag as s,G as l,O as n,N as a,q as c,aJ as d}from"./@vue.c261c184.js";import"./vue-router.f985018f.js";import"./vuex.51c69487.js";import"./vue-i18n.298c823a.js";import"./@intlify.c1f614fa.js";import"./axios.df2521e5.js";import"./resize-observer-polyfill.96acbc9d.js";import"./lodash.c042e748.js";import"./normalize-wheel.86fce3c7.js";import"./mitt.20cc8481.js";import"./dayjs.1c7a45b9.js";import"./async-validator.3a3a8ce1.js";import"./@popperjs.59bfb2c1.js";const p={name:"Register",data(){return{clickVerCode:!1,verSecond:60,timer:null,userInfo:{phone:"",verification:""},rules:{phone:[{required:!0,validator:this.telCheck,trigger:"blur"}],verification:[{required:!0,validator:this.code,trigger:"blur"}]},btn:!0}},methods:{next(){this.$axios.get("http://localhost:9000/phone",{params:{phone:this.userInfo.phone}}).then((o=>{""===o.data?(sessionStorage.setItem("phone",this.userInfo.phone),e.push("/next")):t.info("该号码已经注册，请返回登录")})).catch((function(e){console.log(e)}))},code:(e,t,o)=>""===t?o(new Error("请输入验证码")):4!==t.length?o(new Error("请输入正确4位验证码")):void o(),telCheck(e,t,o){return""===t?(this.btn=!0,o(new Error("请输入手机号码"))):11!==t.toString().length?(this.btn=!0,o(new Error("手机号码必须为11位"))):/^1[3-9]\d{9}$/.test(t)?(this.btn=!1,void o()):(this.btn=!0,o(new Error("请输入有效的手机号码")))},verCodeClick(){this.clickVerCode||(this.clickVerCode=!0,this.timer=setInterval((()=>{1==this.verSecond&&(this.clickVerCode=!1,this.verSecond=60,clearTimer()),this.verSecond-=1}),1e3))},clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)}}},m=d();o("data-v-9e2787bc");const u={class:"login-wrap"},h={class:"ms-login"},f=n("div",{class:"ms-title"},"新用户注册",-1),v=n("i",{class:"el-icon-mobile-phone",style:{"font-size":"20px"}},null,-1),b=n("i",{class:"el-icon-message",style:{"font-size":"20px"}},null,-1),g={class:"login-btn"},j=a("返回登录"),k=a("下一步");r();const C=m(((e,t,o,r,d,p)=>{const C=i("el-input"),y=i("el-form-item"),I=i("el-button"),x=i("router-link"),V=i("el-form");return s(),l("div",u,[n("div",h,[f,n(V,{model:d.userInfo,rules:d.rules,"label-width":"0px",class:"ms-content"},{default:m((()=>[n(y,{prop:"phone"},{default:m((()=>[n(C,{modelValue:d.userInfo.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>d.userInfo.phone=e),placeholder:"请输入电话"},{prepend:m((()=>[v])),_:1},8,["modelValue"])])),_:1}),n(y,{prop:"verification"},{default:m((()=>[n(C,{modelValue:d.userInfo.verification,"onUpdate:modelValue":t[2]||(t[2]=e=>d.userInfo.verification=e),placeholder:"请输入验证码"},{prepend:m((()=>[b])),append:m((()=>[n(I,{onClick:p.verCodeClick,style:{"background-color":"#409EFF",color:"white"}},{default:m((()=>[a(c(d.clickVerCode?d.verSecond+"s":"获取验证码"),1)])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1}),n("div",g,[n(x,{to:"/login"},{default:m((()=>[n(I,{type:"info",style:{"margin-right":"1%"}},{default:m((()=>[j])),_:1})])),_:1}),n(I,{type:"primary",onClick:t[3]||(t[3]=e=>p.next()),style:{"margin-left":"1%"},disabled:d.btn},{default:m((()=>[k])),_:1},8,["disabled"])])])),_:1},8,["model","rules"])])])}));p.render=C,p.__scopeId="data-v-9e2787bc";export default p;
