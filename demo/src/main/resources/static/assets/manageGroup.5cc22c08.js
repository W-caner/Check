import{B as t,p as e,d as a,r as s,o,c as l,a as r,t as i,w as d,h as n}from"./vendor.7d6c6094.js";import"./utils.fbe4b10c.js";const c={name:"manageGroup",inject:["reload"],data:()=>({manList:[],group:{id:"",name:""}}),mounted(){this.$axios.get("http://localhost:9000/manage/getManGroup",{params:{id:localStorage.getItem("userId")}}).then((t=>{for(let e=0;e<t.data.length;e++)this.manList.push(t.data[e])})).catch((t=>{this.$message.error("出错了！")}))},methods:{createGroup(){this.$prompt("请输入创建的群组名称","创建群组",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:e})=>{this.$axios.get("http://localhost:9000/manage/addGroup",{params:{memid:localStorage.getItem("userId"),groupname:e,memname:localStorage.getItem("ms_username")}}).then((t=>{"success"===t.data&&(this.$message({type:"success",message:"创建群组成功"}),this.reload())})).catch((e=>{t.error("出错了")}))})).catch((t=>{}))},delGroup(e,a){Object.keys(this.group).forEach((t=>{this.group[t]=a[t]})),this.$axios.post("http://localhost:9000/manage/delGroup",{id:this.group.id}).then((e=>{"success"===e.data&&(t.success("成功解散群组"),this.reload())})).catch((t=>{this.$message.error("出错了！")}))}}},h=d();e("data-v-85551322");const u={slot:"header",class:"clearfix"},p=r("span",{class:"box-title"},"我管理的群组",-1),m=n("创建群组"),g={style:{display:"none"}},f={style:{"font-size":"16px"}},x=n(" 进入 "),w=n(" 解散 ");a();const y=h(((t,e,a,d,n,c)=>{const y=s("el-button"),_=s("el-table-column"),b=s("router-link"),G=s("el-table"),$=s("el-pagination"),v=s("el-card");return o(),l("div",null,[r(v,{class:"box-card"},{default:h((()=>[r("div",u,[p,r(y,{style:{float:"right","font-size":"16px","padding-right":"30px"},type:"text",onClick:e[1]||(e[1]=t=>c.createGroup())},{default:h((()=>[m])),_:1})]),r(G,{"show-header":!1,data:n.manList,style:{width:"100%"},stripe:"","highlight-current-row":""},{default:h((()=>[r(_,{width:"10"},{default:h((t=>[r("span",g,i(t.row.id),1)])),_:1}),r(_,null,{default:h((t=>[r("span",f,i(t.row.name),1)])),_:1}),r(_,{width:"150",align:"center"},{default:h((t=>[r(b,{to:"/manage/"+t.row.id},{default:h((()=>[r(y,{type:"primary",size:"small",style:{width:"100%"}},{default:h((()=>[x])),_:1})])),_:2},1032,["to"])])),_:1}),r(_,{width:"150",align:"center"},{default:h((t=>[r(y,{type:"danger",size:"small",icon:"el-icon-delete",style:{width:"100%"},onClick:e=>c.delGroup(t.$index,t.row)},{default:h((()=>[w])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),r($)])),_:1})])}));c.render=y,c.__scopeId="data-v-85551322";export default c;
