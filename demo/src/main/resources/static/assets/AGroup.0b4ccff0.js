import{i as e,B as t,p as a,d as s,r as i,o as l,c as d,a as o,t as r,C as n,D as m,w as u,h as c}from"./vendor.7d6c6094.js";const p={name:"Agroup",path:"/add/:id",inject:["reload"],data:()=>({resData:{userId:localStorage.getItem("userid")},route:e(),groupName:"",taskList:[],fileList:{name:"",url:""},editTaskVisible:!1,dialogtitle:"",task:{id:"",title:"",description:"",isFinish:!1},photoU:"",nameVisible:!1,memName:"",edit2:!1}),mounted(){this.$axios.get("http://localhost:9000/add/getName",{params:{id:this.route.params.id}}).then((e=>{null!==e.data&&(this.groupName=e.data)})).catch((e=>{this.$message.error("出错了！")})),this.$axios.get("http://localhost:9000/add/getTask",{params:{id:this.route.params.id,userid:localStorage.getItem("userId")}}).then((e=>{if(null!==e.data){let t={id:0,title:"",isFinish:!1,isEnd:!1};for(let a=0;a<e.data.length;a++)t.id=e.data[a].t_taskid,t.title=e.data[a].t_tasktitle,1===e.data[a].t_isfinish&&(t.isFinish=!0),1===e.data[a].t_isend&&(t.isEnd=!0),this.taskList.push(t)}})).catch((e=>{this.$message.error("出错了！")}))},methods:{write(e,t){Object.keys(task).forEach((e=>{this.task[e]=t[e]})),this.dialogtitle.value=task.name,this.taskdes.value=task.des,editTaskVisible.value=!0},handleRemove(e,t){},submit(e){this.$refs.upload.submit(),this.$refs.upload.clearFiles()},submitSuccess(e,t,a){this.$message({message:"上传成功",type:"success"})},submitPhoto(e){this.editTaskVisible=!1},altername(){this.$axios.get("http://localhost:9000/add/altername",{params:{userid:localStorage.getItem("userId"),id:this.route.params.id}}).then((e=>{this.memName=e.data})).catch((e=>{this.$message.error("出错了！")})),this.nameVisible=!0},alter(){""!==this.memName?this.$axios.post("http://localhost:9000/add/alter",{memname:this.memName,groupid:this.route.params.id,memid:localStorage.getItem("userId")}).then((e=>{"success"===e.data?t.success("成功修改名称"):t.error("修改名称出错")})).catch((e=>{this.$message.error("出错了！")})):t.error("群内昵称不能为空")}}},h=u();a("data-v-69f8afd5");const f={slot:"header",class:"clearfix"},g={class:"box-title"},k=c("修改群内名称"),b={style:{display:"none"}},_=c(" 填写 "),y={style:{"font-size":"16px","margin-bottom":"20px"}},V=o("i",{class:"el-icon-upload"},null,-1),x=o("div",{class:"el-upload__text"},[c("将文件拖到此处，或"),o("em",null,"点击上传")],-1),w=o("div",{class:"el-upload__tip",slot:"tip"},"只能上传jpg/png文件，且不超过500kb",-1),v={class:"dialog-footer"},$=c("取 消"),C=c("提交"),N={style:{"font-size":"16px","margin-bottom":"20px"}},I={style:{"margin-left":"20px"}},F={class:"dialog-footer"},T=c("取 消"),z=c("提交");s();const S=h(((e,t,a,s,u,c)=>{const p=i("el-button"),S=i("el-table-column"),U=i("el-checkbox"),j=i("el-table"),E=i("el-card"),L=i("el-upload"),D=i("el-form"),q=i("el-dialog"),P=i("el-input");return l(),d("div",null,[o(E,{class:"box-card"},{default:h((()=>[o("div",f,[o("span",g,r(u.groupName),1),o(p,{style:{float:"right","font-size":"16px","padding-right":"30px"},type:"text",onClick:t[1]||(t[1]=e=>c.altername())},{default:h((()=>[k])),_:1})]),o(j,{"show-header":!1,data:u.taskList,style:{width:"100%"},"highlight-current-row":""},{default:h((()=>[o(S,{width:"10"},{default:h((e=>[o("span",b,r(e.row.id),1)])),_:1}),o(S,{width:"10"},{default:h((e=>[o(U,{modelValue:e.row.isFinish,"onUpdate:modelValue":t=>e.row.isFinish=t,style:{display:"none"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o(S,null,{default:h((e=>[o("div",{style:{"font-size":"16px"},class:{isfinish:e.row.isFinish}},r(e.row.title),3)])),_:1}),o(S,{width:"150",align:"center"},{default:h((e=>[o(p,{type:"primary",size:"small",style:{width:"100%"},onClick:t=>c.write(e.$index,e.row),icon:"el-icon-lx-edit ",disabled:e.row.isEnd},{default:h((()=>[_])),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data"])])),_:1}),o(q,{title:u.dialogtitle,modelValue:u.editTaskVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>u.editTaskVisible=e)},{footer:h((()=>[o("span",v,[o(p,{onClick:t[2]||(t[2]=e=>u.editTaskVisible=!1)},{default:h((()=>[$])),_:1}),o(p,{type:"primary",onClick:c.submit},{default:h((()=>[C])),_:1},8,["onClick"])])])),default:h((()=>[o("div",y,r(u.task.description),1),o(D,null,{default:h((()=>[o(L,{class:"upload-demo",drag:"",multiple:"",action:"","http-request":c.submitPhoto,"on-success":c.submitSuccess,"on-remove":c.handleRemove,data:u.resData,ref:"upload","list-type":"picture","auto-upload":!1,limit:1},{default:h((()=>[V,x,w])),_:1},8,["http-request","on-success","on-remove","data"])])),_:1})])),_:1},8,["title","modelValue"]),o(q,{title:"修改名称",modelValue:u.nameVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>u.nameVisible=e)},{footer:h((()=>[o("span",F,[o(p,{onClick:t[6]||(t[6]=e=>u.nameVisible=!1)},{default:h((()=>[T])),_:1}),o(p,{type:"primary",onClick:c.alter},{default:h((()=>[z])),_:1},8,["onClick"])])])),default:h((()=>[o(D,null,{default:h((()=>[o("div",N,[n(o("span",null,r(u.memName),513),[[m,!u.edit2]]),n(o(P,{type:"text",modelValue:u.memName,"onUpdate:modelValue":t[4]||(t[4]=e=>u.memName=e),style:{width:"150px"}},null,8,["modelValue"]),[[m,u.edit2]]),o("span",I,[o(p,{type:"primary",icon:{"el-icon-edit":!u.edit2,"el-icon-check":u.edit2},circle:"",size:"mini",onClick:t[5]||(t[5]=e=>u.edit2=!u.edit2)},null,8,["icon"])])])])),_:1})])),_:1},8,["modelValue"])])}));p.render=S,p.__scopeId="data-v-69f8afd5";export default p;
