import{r as s}from"./index.dd089dcb.js";import{p as e,d as t,r,o as a,c as o,a as d,w as l,h as p}from"./vendor.7d6c6094.js";const i={name:"forgetnext",data(){return{btn:!0,pCheck:!0,pCheck2:!0,Psw:{password:"",password2:""},rules:{password:[{required:!0,validator:this.pswCheck,trigger:"blur"}],password2:[{required:!0,validator:this.passwordCheck,trigger:"blur"}]}}},computed:{buttonStatus(){return{pC:this.pCheck,pC2:this.pCheck2}}},watch:{buttonStatus(s){s.pC||s.pC2||(this.btn=!1)}},methods:{psw(){this.$axios.post("http://localhost:9000/alterpsw",{id:sessionStorage.getItem("phone"),password:this.Psw.password}).then((function(e){"failed"===e.data?ElMessage.error("重置密码失败"):(ElMessage.success("重置密码成功"),s.push("/login"))})).catch((function(s){}))},pswCheck(s,e,t){return e.length<6?(this.pCheck=!0,t(new Error("密码不能少于6位"))):e.length>16?(this.pCheck=!0,t(new Error("密码不能超过16位"))):/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/.test(e)?(this.pCheck=!1,void t()):(this.pCheck=!0,t(new Error("密码输入有误，请检查格式是否正确")))},passwordCheck(s,e,t){return e.length<1?(this.pCheck2=!0,t(new Error("重复密码不能为空"))):e!==this.User.password?(this.pCheck2=!0,t(new Error("两次输入密码不一致"))):(this.pCheck2=!1,t())}}},n=l();e("data-v-9d8cfd94");const c={class:"login-wrap"},h={class:"ms-login"},u=d("div",{class:"ms-title"},"重置密码",-1),w=d("p",{style:{"font-size":"14px",color:"#909399"}},"请输入6-16位数字字母组合",-1),m=d("i",{class:"el-icon-lock"},null,-1),C=d("i",{class:"el-icon-unlock"},null,-1),k={class:"login-btn"},f=p("提交");t();const g=n(((s,e,t,l,p,i)=>{const g=r("el-input"),b=r("el-form-item"),v=r("el-button"),_=r("el-form");return a(),o("div",c,[d("div",h,[u,d(_,{model:p.Psw,rules:p.rules,"label-width":"0px",class:"ms-content"},{default:n((()=>[w,d(b,{prop:"password"},{default:n((()=>[d(g,{modelValue:p.Psw.password,"onUpdate:modelValue":e[1]||(e[1]=s=>p.Psw.password=s),placeholder:"请输入密码",type:"password"},{prepend:n((()=>[m])),_:1},8,["modelValue"])])),_:1}),d(b,{prop:"password2"},{default:n((()=>[d(g,{modelValue:p.Psw.password2,"onUpdate:modelValue":e[2]||(e[2]=s=>p.Psw.password2=s),placeholder:"请再次确认密码",type:"password",disabled:p.pCheck},{prepend:n((()=>[C])),_:1},8,["modelValue","disabled"])])),_:1}),d("div",k,[d(v,{type:"primary",onClick:e[3]||(e[3]=s=>i.psw()),disabled:p.btn},{default:n((()=>[f])),_:1},8,["disabled"])])])),_:1},8,["model","rules"])])])}));i.render=g,i.__scopeId="data-v-9d8cfd94";export default i;
