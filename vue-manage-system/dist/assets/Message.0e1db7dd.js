import{ao as e,ag as t,G as a,O as l,aH as s,q as d,F as i,H as n,N as o}from"./@vue.c261c184.js";const r={name:"tabs",data:()=>({message:"first",state:{unread:[],read:[],recycle:[]}}),mounted(){this.$axios.get("http://localhost:9000/getMess",{params:{userid:localStorage.getItem("userId")}}).then((e=>{if(null!==e.data)for(let t=0;t<e.data.length;t++){let a={mesid:0,isread:-1,groupid:0,title:"",date:""};a.mesid=e.data[t].mesid,a.groupid=e.data[t].groupid,a.title='您的任务"'+e.data[t].title+'"还未完成，点击跳转完成',a.date=e.data[t].time,0===e.data[t].isread?this.state.unread.push(a):1===e.data[t].isread?this.state.read.push(a):this.state.recycle.push(a)}})).catch((e=>{this.$message.error("出错了！"),console.log(e)}))},methods:{handleRead(e){const t=this.state.unread.splice(e,1);console.log(t[0].mesid),this.state.read=t.concat(this.state.read),this.$axios.get("http://localhost:9000/alterRead",{params:{mesid:t[0].mesid,isread:1}}).then((e=>{})).catch((e=>{console.log(e)}))},handleDel(e){const t=this.state.read.splice(e,1);this.state.recycle=t.concat(this.state.recycle),this.$axios.get("http://localhost:9000/alterRead",{params:{mesid:t[0].mesid,isread:2}}).then((e=>{})).catch((e=>{console.log(e)}))},handleUnread(e){const t=this.state.read.splice(e,1);this.state.unread=t.concat(this.state.unread),this.$axios.get("http://localhost:9000/alterRead",{params:{mesid:t[0].mesid,isread:0}}).then((e=>{})).catch((e=>{console.log(e)}))},handleRestore(e){const t=this.state.recycle.splice(e,1);this.state.read=t.concat(this.state.read),this.$axios.get("http://localhost:9000/alterRead",{params:{mesid:t[0].mesid,isread:1}}).then((e=>{})).catch((e=>{console.log(e)}))},deleteMes(e){const t=this.state.recycle.splice(e,1);this.$axios.get("http://localhost:9000/deleteMes",{params:{mesid:t[0].mesid}}).then((e=>{})).catch((e=>{console.log(e)}))},handleReadAll(){for(;this.state.unread.length>0;)this.handleRead()},handleDelAll(){for(;this.state.read.length>0;)this.handleDel()},handleUnreadAll(){for(;this.state.read.length>0;)this.handleUnread()},handleRestoreAll(){for(;this.state.recycle.length>0;)this.deleteMes()}}},c={class:""},h={class:"crumbs"},u=l("i",{class:"el-icon-lx-copy"},null,-1),m=o(" 消息中心"),g={class:"container"},p={class:"message-title"},f=o("标为已读"),_={class:"handle-row"},y=o("全部标为已读"),w={class:"message-title",style:{color:"black"}},b=o("标为未读"),k=o("删除"),$={class:"handle-row"},C=o("全部标为未读"),x=o("删除全部"),R={class:"message-title",style:{color:"black"}},A=o("还原"),v=o("彻底删除"),U={class:"handle-row"},z=o("清空回收站");r.render=function(o,r,D,M,V,H){const I=e("el-breadcrumb-item"),j=e("el-breadcrumb"),q=e("router-link"),F=e("el-table-column"),G=e("el-button"),N=e("el-table"),O=e("el-tab-pane"),S=e("el-tabs");return t(),a("div",c,[l("div",h,[l(j,{separator:"/"},{default:s((()=>[l(I,null,{default:s((()=>[u,m])),_:1})])),_:1})]),l("div",g,[l(S,{modelValue:V.message,"onUpdate:modelValue":r[5]||(r[5]=e=>V.message=e)},{default:s((()=>[l(O,{label:`未读消息(${V.state.unread.length})`,name:"first"},{default:s((()=>[l(N,{data:V.state.unread,"show-header":!1,style:{width:"100%"}},{default:s((()=>[l(F,null,{default:s((e=>[l(q,{to:"/add/"+e.row.groupid},{default:s((()=>[l("span",p,d(e.row.title),1)])),_:2},1032,["to"])])),_:1}),l(F,{prop:"date",width:"180"}),l(F,{width:"120",align:"center"},{default:s((e=>[l(G,{size:"small",onClick:t=>H.handleRead(e.$index)},{default:s((()=>[f])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),l("div",_,[l(G,{type:"primary",onClick:r[1]||(r[1]=e=>H.handleReadAll())},{default:s((()=>[y])),_:1})])])),_:1},8,["label"]),l(O,{label:`已读消息(${V.state.read.length})`,name:"second"},{default:s((()=>["second"===V.message?(t(),a(i,{key:0},[l(N,{data:V.state.read,"show-header":!1,style:{width:"100%"}},{default:s((()=>[l(F,null,{default:s((e=>[l(q,{to:"/add/"+e.row.groupid},{default:s((()=>[l("span",w,d(e.row.title),1)])),_:2},1032,["to"])])),_:1}),l(F,{prop:"date",width:"180"}),l(F,{width:"100",align:"center"},{default:s((e=>[l(G,{size:"small",onClick:t=>H.handleUnread(e.$index)},{default:s((()=>[b])),_:2},1032,["onClick"])])),_:1}),l(F,{width:"100",align:"center"},{default:s((e=>[l(G,{size:"small",type:"danger",onClick:t=>H.handleDel(e.$index)},{default:s((()=>[k])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),l("div",$,[l(G,{onClick:r[2]||(r[2]=e=>H.handleUnreadAll())},{default:s((()=>[C])),_:1}),l(G,{type:"danger",onClick:r[3]||(r[3]=e=>H.handleDelAll())},{default:s((()=>[x])),_:1})])],64)):n("",!0)])),_:1},8,["label"]),l(O,{label:`回收站(${V.state.recycle.length})`,name:"third"},{default:s((()=>["third"===V.message?(t(),a(i,{key:0},[l(N,{data:V.state.recycle,"show-header":!1,style:{width:"100%"}},{default:s((()=>[l(F,null,{default:s((e=>[l("span",R,d(e.row.title),1)])),_:1}),l(F,{prop:"date",width:"150"}),l(F,{width:"100",align:"center"},{default:s((e=>[l(G,{size:"small",onClick:t=>H.handleRestore(e.$index)},{default:s((()=>[A])),_:2},1032,["onClick"])])),_:1}),l(F,{width:"100",align:"center"},{default:s((e=>[l(G,{size:"small",type:"danger",onClick:t=>H.deleteMes(e.$index)},{default:s((()=>[v])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),l("div",U,[l(G,{type:"danger",onClick:r[4]||(r[4]=e=>H.handleRestoreAll())},{default:s((()=>[z])),_:1})])],64)):n("",!0)])),_:1},8,["label"])])),_:1},8,["modelValue"])])])};export default r;
